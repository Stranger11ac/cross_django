{% extends 'base/widget.html' %}
{% load static %}
{% block title %}Mapa de la UTC üó∫Ô∏è{% endblock %}

{% block extra_head %}
<link href="https://api.mapbox.com/mapbox-gl-js/v3.4.0/mapbox-gl.css" rel="stylesheet">
<link href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.1/mapbox-gl-directions.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
  integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
{% endblock %}
{% block content %}
<main class="full_page" id='map' data-mapa_edif="{% url 'mapa_edificios' %}">
  <!-- Controles de ruta -->
  <section class="controls_route card m-2" id="controls_route">
    <div class="card-header d-flex justify-content-between align-items-center p-3">
      <h6 class="m-0"><i class="fa-solid fa-route me-1"></i>Como LLegar...</h6>
      <button type="button" class="btn-close" id="closeControlsRoute" data-close="controls_route"></button>
    </div>
    <form class="card-body p-3" autocomplete="off">
      <select id="origen" id="formControlSm" class="form-control form-control-sm mb-2" required>
        <option disabled selected hidden>Tu ubicacion</option>
      </select>
      <select id="destino" class="form-control form-control-sm">
        <option value="">Seleccionar destino</option>
      </select>
      <button id="calcularRuta" type="button" class="btn btn_detail btn-block btn-sm mt-2" required>
        ir <i class="fa-solid fa-diamond-turn-right ms-1"></i>
      </button>
    </form>
  </section>
</main>

<!-- Canvas lateral -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="infoLateral" aria-labelledby="infoLateralLabel">
  <div class="offcanvas-header position-relative p-0">
    <button type="button" class="btn-close position-absolute top-0 end-0 p-4 m-1 m-md-2" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    <div class="bg-image">
      <img src="{% static 'img/default_image.webp' %}" id="imagen_actual" class="img-fluid" />
      <div class="mask mask_white">
        <div class="d-flex align-items-end h-100 px-4 px-md-3 px-xl-5">
          <h5 class="fw-bold mb-0" id="lateralTitle"></h5>
        </div>
      </div>
    </div>
  </div>
  <div class="offcanvas-body">
    <div id="offcanvasContent">
      <!-- Aqu√≠ se insertar√° din√°micamente el contenido -->
    </div>
  </div>
</div>

<!-- Canvas Bajo -->
<div class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvasBottom" aria-labelledby="offcanvasBottomLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasBottomLabel">Cambiar Estilo <i class="fa-solid fa-layer-group ms-1"></i></h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body row" id="offcanvasbody">
    <div class="col-4 col-md p-2">
      <label class="card" for="satellite-streets-v12">
        <input id="satellite-streets-v12" type="radio" name="rtoggle" value="satellite" class="none">
        <div class="card-body pb-1 p-3 text-center">
          <div><i class="fa-solid fa-satellite"></i></div>
          <div>Satelital</div>
        </div>
      </label>
    </div>
    <div class="col-4 col-md p-2">
      <label class="card btn_detail text-white" for="streets-v12">
        <input id="streets-v12" type="radio" name="rtoggle" value="streets" disabled checked class="none">
        <div class="card-body pb-1 p-3 text-center">
          <div><i class="fa-solid fa-signs-post"></i></div>
          <div>Caminos</div>
        </div>
      </label>
    </div>
    <div class="col-4 col-md p-2">
      <label class="card" for="outdoors-v12">
        <input id="outdoors-v12" type="radio" name="rtoggle" value="outdoors" class="none">
        <div class="card-body pb-1 p-3 text-center">
          <div><i class="fa-solid fa-road"></i></div>
          <div>Calles</div>
        </div>
      </label>
    </div>
    <div class="col-6 col-md p-2">
      <label class="card" for="light-v11">
        <input id="light-v11" type="radio" name="rtoggle" value="light" class="none">
        <div class="card-body pb-1 p-3 text-center">
          <div><i class="fa-regular fa-map"></i></div>
          <div>Claro</div>
        </div>
      </label>
    </div>
    <div class="col-6 col-md p-2">
      <label class="card" for="dark-v11">
        <input id="dark-v11" type="radio" name="rtoggle" value="dark" class="none">
        <div class="card-body pb-1 p-3 text-center">
          <div><i class="fa-solid fa-map"></i></div>
          <div>Obscuro</div>
        </div>
      </label>
    </div>
  </div>
</div>

{% endblock %}
{% block scripts_end %}
<script src="https://api.mapbox.com/mapbox-gl-js/v3.4.0/mapbox-gl.js"></script>
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-directions/v4.1.1/mapbox-gl-directions.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="{% static 'js/mapbox.js' %}"></script>
{% endblock %}