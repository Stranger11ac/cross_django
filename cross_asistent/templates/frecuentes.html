{% extends 'structure.html' %}
{% block title %}Preguntas Frecuentes ðŸ’¬{% endblock %}
{% block content %}
<main class="container container-fluid">
    <!-- Jumbotron -->
    <div class="p-5 text-center bg-body-tertiary">
        <h1 class="mb-3">Preguntas Frecuentes <i class="fa-solid fa-clipboard-question ms-1"></i></h1>
        <hr class="hr_divisor" />
    </div>
    <!-- Jumbotron -->
    <input type="text" id="searchInput" onkeyup="searchFunction()" placeholder="Buscar preguntas...">

    <ul id="questionList">
        {% for quest in quest_all %}
            <li class="item_list">{{ quest.pregunta }}</li>
        {% endfor %}
    </ul>

    <script>
        function searchFunction() {
            let input = document.getElementById('searchInput');
            let filter = input.value.toLowerCase();
            let li = document.querySelector('.item_list');

            for (let i = 0; i < li.length; i++) {
                let txtValue = li[i].textContent || li[i].innerText;
                if (txtValue.toLowerCase().indexOf(filter) > -1) {
                    li[i].style.display = "";
                } else {
                    li[i].style.display = "none";
                }
            }
        }
    </script>

    <div class="accordion" id="accordionExampleY">
        {% for quest in quest_all %}
        <div class="accordion-item">
            <h2 class="accordion-header" id="heading{{ quest.id }}">
                <button
                    data-mdb-collapse-init
                    class="accordion-button"
                    type="button"
                    data-mdb-toggle="collapse"
                    data-mdb-target="#quest-{{ quest.id }}"
                    aria-expanded="true"
                    aria-controls="quest-{{ quest.id }}"
                >
                    <i class="fas fa-question-circle fa-sm me-2 opacity-70"></i>{{ quest.pregunta }}
                </button>
            </h2>
            <div
                id="quest-{{ quest.id }}"
                class="accordion-collapse collapse {% if quest.id == 1 %}show{% endif %}"
                aria-labelledby="heading{{ quest.id }}"
                data-mdb-parent="#accordionExampleY"
            >
                <div class="accordion-body">
                    {{ quest.respuesta|truncatechars:150 }}
                    <div>
                        <a href="" class="btn btn_detail"
                            >Saber mas <i class="fa-solid fa-up-right-from-square ms-1"></i
                        ></a>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</main>
<footer></footer>

{% endblock %}
