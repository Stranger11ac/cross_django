function getCSRFToken(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){var a=jQuery.trim(t[e]);if("csrftoken="==a.substring(0,10))return decodeURIComponent(a.substring(10))}const o=$("[name=csrfmiddlewaretoken]").val();return o}function cadenaRandom(t,e){for(var a="",o=0;o<t;o++){var r=Math.floor(Math.random()*e.length);a+=e.charAt(r)}return a}function jsonSubmit(t){t.preventDefault=t.preventDefault||function(){},t.preventDefault();const e=t.target,a=new FormData(e);if(a.has("contenidoWord")){const t=tinymce.activeEditor.getContent();a.set("contenidoWord",t);const e=tinymce.activeEditor.getContent({format:"text"});a.set("textTiny",e)}try{formSubmitBtn=e.querySelector('button[type="submit"]'),formSubmitBtn&&formSubmitBtn.setAttribute("disabled","disabled")}catch(t){console.warn("Advertencia: Boton de envio no encontrado..."),console.warn(formSubmitBtn),console.error(t)}fetch(e.action,{method:"POST",body:a,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRFToken":formToken}}).then(t=>t.ok?t.json():t.json().then(t=>{throw new Error(t.error||"Error desconocido")})).then(t=>{if(dataMessage=t.message,1==t.success){let r="success";function a(){window.location.href=t.redirect_url}if(t.icon&&(r=t.icon),dataPosition="center",t.position&&(dataPosition=t.position),"singin"==t.functions)return a();if("reload"==t.functions)var o=function(){location.reload()};else if("redirect"==t.functions)o=function(){a()};setTimeout(()=>e.querySelector('button[type="submit"]').removeAttribute("disabled"),8e3),alertSToast(dataPosition,timerOut,r,dataMessage,o);const n=document.querySelectorAll('input[type="password"]');n.forEach(t=>t.value="")}else 0==t.success?(console.waning(dataMessage),t.valSelector&&(e.querySelector(`[data-selector-input="${t.valSelector}"]`).classList.add("is-invalid"),e.querySelector(`[data-selector-input="${t.valSelector}"]`).classList.remove("is-valid")),alertSToast("top",timerOut+6e3,"warning",dataMessage,()=>{e.querySelector('button[type="submit"]').removeAttribute("disabled")})):"submit"==t.functions&&e.querySelector('button[type="submit"]').removeAttribute("disabled")}).catch(t=>{console.error("😥 Error inesperado:",t),errorMessage=t.message||"Ocurrió un error. Intente nuevamente. 😥",alertSToast("center",timerOut+8e3,"error",errorMessage,()=>{e.querySelector('button[type="submit"]').removeAttribute("disabled")})})}function convertToDateInputFormat(t){const e=new Date(t),a=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${a}-${o}-${r}`}function alertSToast(t,e,a,o,r){const n=Swal.mixin({toast:!0,position:t,showConfirmButton:!1,showCloseButton:!0,timer:e,timerProgressBar:!0,customClass:{icon:"icon_alert",title:"title_alert",timerProgressBar:"progressbar_alert",closeButton:"close_button_alert"},didOpen:t=>{t.addEventListener("mouseenter",Swal.stopTimer),t.addEventListener("mouseleave",Swal.resumeTimer)},didDestroy:r});n.fire({icon:a,title:o})}var alfabetico="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",alfanumerico="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567890123456789",caracteres="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz01234567890123456789@$!%*.?&",texto3=/[a-zA-Z0-9]{3}/,formToken=getCSRFToken(),timerOut=5e3,expressions={name:/^[a-zA-ZÀ-ÿ\s]+$/,username:/^(?![0-9_-])[a-zA-Z0-9_-]+$/,email:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,password:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*.?&])[A-Za-z\d@$!%*.?&]{8,}$/};$(document).ready(function(){try{$("#overlayMenu").click(()=>{$("nav button.navbar-toggler").click()});var t=$("#searchInput");function e(){var e=t.val().toLowerCase();$("#searchInput").text(e);$(".results_item").filter(function(){return $(this).toggle($(this).text().toLowerCase().indexOf(e)>-1),$(this).is(":visible")}).length}t.on("input",e);var a=1/0;let l=null;function o(){$(this).addClass("active");var t=cadenaRandom(10,caracteres),e=$(this).data("editinput");setTimeout(()=>{$(this).removeClass("active")},1e3),$("#"+e).val(`UTC#${t}`).addClass("active")}function r(){const t=["#4285F4","#EA4335","#FBBC05","#4285F4","#34A853","#EA4335"],e=$(".style_google"),a=e.text();e.empty();for(let o=0;o<a.length;o++)e.append(`<span style="color:${t[o]}">${a[o]}</span>`)}$('[id^="bannerid_"]').each(function(){var t=$(this).attr("id"),e=parseInt(t.split("_")[1]);e<a&&(a=e,l=$(this))}),null!==l&&l.addClass("active"),$("[data-submit-form]").submit(jsonSubmit),$("[data-submit-form]").is("[data-submit-ready]")&&setTimeout(()=>{$('[data-submit-ready] button[type="submit"]').click()},2e3),$("[data-submit-blur] .input_blur").on("blur",function(){let t=$(this).closest("[data-submit-blur]"),e=t.data("submit-blur");t.find(`button#${e}`).click()}),$("[data-submit-blur] .input_change").on("change",function(){let t=$(this).closest("[data-submit-blur]"),e=t.data("submit-blur");setTimeout(()=>{t.find(`button#${e}`).click()},1e3)}),$("[data-submit-click]").on("click",function(){const t=$(this).data("submit-click");$("#"+t).click().attr("disabled","disabled"),disabledButtons.includes(t)||disabledButtons.push(t),localStorage.setItem("disabledButtons",JSON.stringify(disabledButtons))}),$("button[data-editinput]").click(o),$("[data-btn_closed]").on("click",function(){var t=$(this).data("btn_closed");$("#"+t).toggleClass("show")}),$("[data-reset_form]").on("click",function(){var t=$(this).data("reset_form"),e=$("#"+t)[0];setTimeout(()=>{e&&e.reset()},1500)}),r(),$(document).on("keydown",function(t){"Escape"!==t.key&&27!==t.keyCode||Swal.close()});const c=$("input[data-init-clear], textarea[data-init-clear]");c.each(function(){$(this).on("input",function(){let t=$(this).attr("id"),e=$(`[data-clear="${t}"]`);""==$(this).val()?e.hide():e.show()})});const d=$("[data-clear]");d.on("click",function(){const t=$(this).attr("data-clear");$(`#${t}`).val(""),$(this).slideUp("fast")}),$("[data-change-color]").on("click",function(){$("[data-change-color]").each(function(t,e){$(e).removeClass("active")});var t=$(this).addClass("active").data("change-color"),e=$(this).data("rgb");$("html").attr("data-color_prefer",t),localStorage.setItem("data-color_prefer",t),localStorage.setItem("data-color_rgb",e)});const u=localStorage.getItem("data-color_prefer");u?($(`[data-change-color="${u}"]`).addClass("active"),$("html").attr("data-color_prefer",u)):($('[data-change-color="blue"]').addClass("active"),$("html").attr("data-color_prefer","blue")),$("#switchTheme").on("click",function(){$("#switchTheme").is(":checked")?($("#switchText").text("Claro"),$("html").attr("data-mdb-theme","light"),localStorage.setItem("data-mdb-theme","light"),localStorage.setItem("mapbox-last_layer","light-v11")):($("#switchText").text("Oscuro"),$("html").attr("data-mdb-theme","dark"),localStorage.setItem("data-mdb-theme","dark"),localStorage.setItem("mapbox-last_layer","dark-v11"))});const m=localStorage.getItem("data-mdb-theme");m&&("light"==m?($("#switchText").text("Claro"),$("#switchTheme").prop("checked",!0),$("html").attr("data-mdb-theme","light"),localStorage.setItem("mapbox-last_layer","light-v11")):"dark"==m&&($("#switchText").text("Oscuro"),$("#switchTheme").prop("checked",!1),$("html").attr("data-mdb-theme","dark"),localStorage.setItem("mapbox-last_layer","dark-v11")));const f=$.trim($("#firmaPerfilTexto").text());function n(t,e){if(t.files&&t.files[0]){var a=new FileReader;a.onload=function(t){$(`#${e}`).attr("src",t.target.result)},a.readAsDataURL(t.files[0])}}$("#new_firma").on("input",function(){const t=$(this).val();""===t.trim()?$("#firmaPerfilTexto").text(f):$("#firmaPerfilTexto").text(t)}),$("[data-img_dom]").change(function(){idImgDom=$(this).data("img_dom"),n(this,idImgDom)}),$("[data-input_transparent]").on({focus:function(){$(this).toggleClass("input_transparent")},blur:function(){$(this).toggleClass("input_transparent")}});var i=!1;function s(){i?$("#updatePassBlock").slideUp("fast"):$("#profileSaved").slideUp("fast",function(){$("#updatePassBlock").slideUp("fast")})}$("#updatePassBtn").on("click",function(){let t=$(this);$("#updatePassText").toggle(),$("#updatePassBtn").hasClass("bg_blue-green")?$("#profileSaved").slideDown("fast",function(){$("#updatePassBlock").slideDown("fast",function(){$("html, body").scrollTop($(document).height())})}):s(),"Cambiar Contraseña"==t.text()?(t.toggleClass("bg_blue-green bg_blue-red"),t.text("No Cambiar Contraseña"),i||$("#passwordSend").val(""),$("#newPass").val(""),$("#confNewPass").val("")):(t.toggleClass("bg_blue-green bg_blue-red"),t.text("Cambiar Contraseña"))}),$("[data-input_change]").each(function(){const t=$(this),e=t.attr("name");var a=t.val();t.on("input",function(){t.val()==a?(t.attr("name",`${e}`),s(),i=!1):(t.attr("name",`${e}Changed`),$("#profileSaved").slideDown("fast"),i=!0,""==t.val()&&t.attr("name",`${e}`))}),t.on("blur",function(){""==t.val()&&(t.attr("name",`${e}`),s(),i=!1)}),t.on("click",function(){e})}),$("input#deletePicture").change(function(){$(this).is(":checked")?($('[for="deletePicture"]').addClass("btn_press"),$("#profileSaved").slideDown("fast"),i=!0):($('[for="deletePicture"]').removeClass("btn_press"),s(),i=!1)}),$("#formularioArticulo #blogNewUpdate").change(function(){blogIdGet=$("#formularioArticulo #blogNewUpdate").val(),dataGetBlog=$("#formularioArticulo #blogNewUpdate").data("get-blog"),"newBlog"!=blogIdGet?$.ajax({url:dataGetBlog,type:"GET",data:{id:blogIdGet},success:function(t){$("#formularioArticulo #imgArticle").attr("src","/static/img/default_image.webp"),t.encabezado&&$("#formularioArticulo #imgArticle").attr("src",t.encabezado),$("#formularioArticulo #titulo").addClass("active").val(t.titulo);const e=t.contenido;tinymce.get("mainTiny").setContent(e),$("#formularioArticulo .blogSubmit").html('Modificar <i class="fa-regular fa-paper-plane ms-1"></i>'),$("#formularioArticulo .btnModal").slideDown("fast"),$("#blogDelete #blogDeleteTitle").text(t.titulo),$("#blogDelete #blogIdDelete").val(blogIdGet)},error:function(t){console.error("Error al obtener datos: "+t),alertSToast("center",8e3,"error","UPS! 😯🤔🧐<br> hubo un error al obtener los datos, consulte la consola.")}}):($("#formularioArticulo #imgArticle").attr("src","/static/img/default_image.webp"),$("#formularioArticulo #titulo").removeClass("active").val(""),tinymce.get("mainTiny").setContent(""),$("#formularioArticulo .blogSubmit").html('Publicar <i class="fa-regular fa-paper-plane ms-1"></i>'),$("#formularioArticulo .btnModal").slideUp("fast"),$("#blogDelete #blogDeleteTitle").text(""),$("#blogDelete #blogIdDelete").val(""))}),$("[data-select_addClass]").change(function(){const t=$(this).val();$(this).attr("class",`form-select change_bg ${t}`)})}catch(t){console.error("Error Inesperado: ",t),alertSToast("center",8e3,"error","😥 Ah ocurrido un error inesperado. codigo: #304")}}),document.querySelector("main").classList.contains("main_container")&&(window.location.href="/logout");const inputs=document.querySelectorAll("input[data-copy]");inputs.forEach(t=>{const e=()=>{if(!navigator.clipboard)return void alertSToast("center",8e3,"info","Tu navegador no admite copiar al portapapeles 😯😥🤔");const e=t.value;""!=e&&navigator.clipboard.writeText(e).then(()=>{alertSToast("top",5e3,"success","Texto Copiado! 🥳")}).catch(t=>{const e="Error al copiar al portapapeles";console.error(e,":",t),alertSToast("top",8e3,"error",`${e} 🤔😥`)})};t.addEventListener("click",e)});var imagesZoom=document.querySelectorAll(".materialBoxed"),instances=M.Materialbox.init(imagesZoom);const dropArea=document.getElementById("drop-area");if(dropArea){const t=document.getElementById("file-input"),e=document.getElementById("image-list");function formatBytes(t,e=2){if(0===t)return"0 Bytes";const a=1024,o=e<0?0:e,r=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,n)).toFixed(o))+r[n]}function preventDefaults(t){t.preventDefault(),t.stopPropagation()}function handleDrop(t){let e=t.dataTransfer,a=e.files;handleFiles({target:{files:a}})}function handleFiles(t){let e=t.target.files,a=[],o=1;[...e].forEach(t=>{validateImage(t)&&(a.push(t),previewImage(t,o),++o,console.log(++o))}),a.length>0?alertSToast("top-end",6e3,"success",`${a.length} imágenes cargadas <br>correctamente 😋🤘🥳`):alertSToast("center",6e3,"error","No se admite este tipo de archivo ⚠️😯😥")}function validateImage(t){const e=["image/jpeg","image/png","image/jpg"];return e.includes(t.type)}function previewImage(t,a){const o=new FileReader;o.readAsDataURL(t),o.onloadend=function(){const r=t.name;let n=r.lastIndexOf(".");n=r.substring(n+1);const i=cadenaRandom(5,alfanumerico),s=`<div id="img_${i}" class="image-item"><img src="${o.result}" class="img-rounded unfocus-5"><div class="fs-8"><p class="name-file m-0">${r}</p><p class="size-file m-0">(${n}) ${formatBytes(t.size)}</p></div></div>`;e.insertAdjacentHTML("beforeend",s),setTimeout(()=>{document.querySelector(`#img_${i}`).classList.add("visible"),setTimeout(()=>{document.querySelector(`#img_${i} img`).classList.remove("unfocus-5")},110*a)},90*a)}}["dragenter","dragover","dragleave","drop"].forEach(t=>{dropArea.addEventListener(t,preventDefaults,!1)}),["dragenter","dragover"].forEach(t=>{dropArea.addEventListener(t,()=>dropArea.classList.add("hover"),!1)}),["dragleave","drop"].forEach(t=>{dropArea.addEventListener(t,()=>dropArea.classList.remove("hover"),!1)}),dropArea.addEventListener("drop",handleDrop,!1),dropArea.addEventListener("click",()=>t.click(),!1),t.addEventListener("change",handleFiles,!1)}document.oncontextmenu=function(){return!1};