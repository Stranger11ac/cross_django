document.addEventListener("DOMContentLoaded",function(){function e(e){const t={year:"2-digit",month:"2-digit",day:"2-digit"};return e.toLocaleDateString("es-ES",t)}function t(e){const t={hour:"2-digit",minute:"2-digit",hour12:!0};return e.toLocaleTimeString("es-ES",t)}function a(e){return e.toISOString().slice(0,10)}function n(e){return e.toTimeString().slice(0,5)}var d=document.getElementById("calendar"),i=d.getAttribute("data-events"),r=new FullCalendar.Calendar(d,{headerToolbar:{start:"title",end:"today,prev,next"},footerToolbar:{start:"timeGridDay,timeGridWeek,dayGridMonth,multiMonthYear",end:"prevYear,nextYear"},firstDay:0,events:i,initialView:"dayGridMonth",locale:"es",height:"auto",navLinks:!0,nowIndicator:!0,weekNumbers:!0,weekText:"",slotLabelFormat:{hour:"numeric",minute:"2-digit",hour12:!0},eventTimeFormat:{hour:"numeric",hour12:!0,meridiem:"narrow"},views:{timeGridWeek:{hiddenDays:[0,6]},dayGridMonth:{displayEventTime:!1},multiMonthYear:{multiMonthMaxColumns:4,multiMonthMinWidth:250}},eventClick:function(d){var i=d.event;const r=i.extendedProps.imagen;var o=new mdb.Modal(document.getElementById("eventModal"));const s=i.end,l=i.start,c=i.title,v=i.allDay,m=i.classNames,u=i.extendedProps.button,h=i.extendedProps.location,g=i.extendedProps.description;if($("#eventModal").hasClass("calendar_update")?($(".idUpdate").val(i.id),$("#tituloUpdate").addClass("active").val(c),$(".eventTitle").text(c),$("#informacionUpdate").addClass("active").val(g),$("#redirigirUpdate").addClass("active").val(u),$("#ePleaceUpdate").addClass("active").val(h),$("#eStartUpdate").addClass("active").val(`${a(l)}T${n(l)}`),s?$("#eEndUpdate").addClass("active").val(`${a(s)}T${n(s)}`):$("#eEndUpdate").addClass("active").val(`${a(l)}T${n(l)}`),v?$("#eAllDayUpdate").attr("checked",!0):$("#eAllDayUpdate").attr("checked",!1),$("#eColorUpdate option#eColorSelected").attr("selected",!1),$(`#eColorUpdate option[value="${m}"]`).attr("selected",!0),$("[data-select_addClass]").attr("class",`form-select change_bg ${m}`),""==r?$("[for='imagenUpdate']").html('Subir Imagen <i class="fa-regular fa-images ms-1"></i>'):$("[for='imagenUpdate']").html('Cambiar Imagen <i class="fa-regular fa-images ms-1"></i>')):($("#eventModalLabel").text(c),$("#eventStartDate").text(e(l)),$("#eventStartTime").text(t(l)),$("#eventLoc").text(h||"Campus UTC"),g?$("#eventDesc").text(g):$("#eventDesc").addClass("none"),s?($("#eventEndDate").text(e(s)),$("#eventEndTime").text(t(s)),$("#dateSeparator").removeClass("none")):($("#eventEndDate").text(""),$("#eventEndTime").text(""),$("#dateSeparator").addClass("none")),""==u?($("#eventBtnDiv").addClass("none"),$("#eventBtn").attr("href","")):($("#eventBtnDiv").removeClass("none"),$("#eventBtn").attr("href",u))),""==r)$("#eventImg").addClass("none"),$("#eventModal").hasClass("calendar_update")&&$("#eventImg").removeClass("none");else{$("#eventImg").removeClass("none");let e=r.replace("cross_asistent/","");$("#eventImg").attr("src",e)}setTimeout(()=>{o.show()},300),d.jsEvent.preventDefault()}});r.render(),$(document).on("click",".fc-multimonth-month",function(){var e=$(this).attr("data-date");r.changeView("dayGridMonth",e)})});